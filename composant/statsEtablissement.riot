<statsEtablissement>
<div class="card">
    <header class="card-header">
      <p class="card-header-title">Statistiques de l'établissement</p>
    </header>
    <div class="card-content">
      <div class="content">
        <p>Moyenne des admis : <strong>{ moyenneAdmis }</strong></p>
        <p>Capacité : <strong>{ capacite }</strong></p>
        <p>Sélectivité : <strong>{ selectivite }</strong></p>
        <!-- Ajoutez ici les autres statistiques -->
      </div>
    </div>
  </div>

  <script>
    export default {
      props: {
        etablissement: Object,
      },
      data() {
        return {
          moyenneAdmis: null,
          capacite: null,
          selectivite: null,
          // Ajoutez ici les autres statistiques
          //ville_etab, dep, acad_mies, capa_fin, voe_tot, RangdernierAdmisSaufBacTechno ran_grp1
          //RangdernierAdmisTechno ran_grp3
          //pas de la même académie 100 - pct_aca_orig
          //Vitesse de remplissage:acc_debutpp,acc_datebac,acc_finpp
          //repartition par genre: 
        };
      },
async onMounted() {
    if (this.props.etablissement) {
        await this.fetchStatistiques();
    }
},
async onUpdated() {
    if (this.props.etablissement && this.prevProps.etablissement !== this.props.etablissement) {
        await this.fetchStatistiques();
    }
},
      async fetchStatistiques() {
<<<<<<< HEAD
    if (this.props.etablissement) {
        const etablissementId = this.props.etablissement.fields.g_ea_id_vx; // Remplacez par le bon champ si ce n'est pas le bon identifiant
        const statistiques = await fetchStatistiquesEtablissement(etablissementId);
        this.moyenneAdmis = statistiques.moyenneAdmis;
        this.capacite = statistiques.capacite;
        this.selectivite = statistiques.selectivite;
        // Mettez à jour les autres statistiques ici
    }
},

      
=======
            let result = await fetch("https://data.enseignementsup-recherche.gouv.fr/api/records/1.0/search/?dataset=fr-esr-parcoursup&q=&sort=tri&facet=fili&timezone=Europe%2FBerlin")
            let resultats = await result.json()
            let table = resultats["facet_groups"][0]["facets"]
            return table
        if (this.etablissementId) {
          const statistiques = await fetchStatistiquesEtablissement(this.etablissementId);
          this.moyenneAdmis = statistiques.moyenneAdmis;
          this.capacite = statistiques.capacite;
          this.selectivite = statistiques.selectivite;
          // Mettez à jour les autres statistiques ici
        }
      },
>>>>>>> nevejans
    };
  </script>
</statsEtablissement>